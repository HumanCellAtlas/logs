{
  "RoleARN": "${FIREHOSE_ROLE_ARN}",
  "DomainARN": "${ES_ARN}",
  "IndexName": "cwl",
  "TypeName": "fromFirehose",
  "IndexRotationPeriod": "OneDay",
  "BufferingHints": {
    "IntervalInSeconds": 60,
    "SizeInMBs": 1
  },
  "RetryOptions": {
    "DurationInSeconds": 5
  },
  "CloudWatchLoggingOptions": {
    "Enabled": true,
    "LogGroupName": "${FIREHOSE_LOG_GROUP_NAME}",
    "LogStreamName": "ElasticsearchDelivery"
  },
  "S3BackupMode": "FailedDocumentsOnly",
  "S3Configuration": {
    "RoleARN": "${FIREHOSE_ROLE_ARN}",
    "BucketARN": "${FIREHOSE_S3_BUCKET_ARN}",
    "Prefix": "firehose",
    "BufferingHints": {
      "SizeInMBs": 1,
      "IntervalInSeconds": 60
    },
    "CompressionFormat": "GZIP",
    "EncryptionConfiguration": {
      "KMSEncryptionConfig": {
        "AWSKMSKeyARN": "${AWS_KMS_KEY}"
      }
    },
    "CloudWatchLoggingOptions": {
      "Enabled": true,
      "LogGroupName": "${FIREHOSE_S3_LOG_GROUP_NAME}",
      "LogStreamName": "S3Delivery"
    }
  },
  "ProcessingConfiguration": {
    "Enabled": true,
    "Processors": [
        {
            "Type": "Lambda",
            "Parameters": [
                {
                    "ParameterName": "LambdaArn",
                    "ParameterValue": "${FIREHOSE_PREPROCESS_LAMBDA_ARN}"
                },
                {
                    "ParameterName": "NumberOfRetries",
                    "ParameterValue": "3"
                },
                {
                    "ParameterName": "RoleArn",
                    "ParameterValue": "${FIREHOSE_ROLE_ARN}"
                },
                {
                    "ParameterName": "BufferSizeInMBs",
                    "ParameterValue": "3"
                },
                {
                    "ParameterName": "BufferIntervalInSeconds",
                    "ParameterValue": "60"
                }
            ]
        }
    ]
  }
}      
                   